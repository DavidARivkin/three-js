<polymer-element name="three-js-controls" constructor="threeJsControls" noscript>
</polymer-element>


<script src="lib/OrbitControls.js"></script>
<polymer-element name="three-js-orbitControls" extends="three-js-controls" attributes="cameraUp panSpeed zoomSpeed rotateSpeed autoRotate">
  <script>
    Polymer('three-js-orbitControls', {
      autoRotate: false,
      cameraUp : [0,1,0],
      panSpeed : 8.0,
      zoomSpeed: 2.0,
      rotateSpeed: 2.0, 
      autoRotateSpeed:4.0,
      object: null,
      ready: function() {
        this.object = new THREE.OrbitControls();
        this._cameraUp = new THREE.Vector3(this.cameraUp[0],this.cameraUp[1],this.cameraUp[2]);  
      },
      init:function(camera, domElement)
      {
        this.object.object = camera;
        this.object.setDomElement( domElement);
        this.object.upVector = this._cameraUp;

		    this.object.userPanSpeed = this.panSpeed;
		    this.object.userZoomSpeed = this.zoomSpeed;
      	this.object.userRotateSpeed = this.rotateSpeed;

		    this.object.autoRotate = this.autoRotate;
		    this.object.autoRotateSpeed = this.autoRotateSpeed;
      },
      addToParent3: function() {
        if (this.parentNode.add3 && !this.objectParent) {
          this.objectParent = this.parentNode;
          this.parentNode.add3(this);
          var parentName = this.parentNode.localName;
          //console.log('[%s]: request adding to [%s]', this.localName + (this.id ? '#' + this.id : ''), parentName);
        }
      },
      attached: function()
      {
        this.addToParent3();   
      },
      //attribute change handlers
      autoRotateChanged:function()
      {
        this.object.autoRotate = this.autoRotate;
      },
      cameraUpChanged:function(){
        this._cameraUp = new THREE.Vector3(this.cameraUp[0],this.cameraUp[1],this.cameraUp[2]);   
        this.object.upVector = this._cameraUp;
      }
    });
  </script>  

</polymer-element>
